### Этап 1: Выбор средств, установка и начальная конфигурация

#### 1. Выбор гипервизора
- **Самостоятельный выбор**:
  - Рекомендуется: Parallels Desktop 19 (для чипов Apple M-series)
  - Альтернатива: UTM 4.4 (открытое решение)

- **Обоснование выбора**:
  - Parallels обеспечивает лучшую производительность виртуализации ARM
  - Полная поддержка инструментов Guest Additions для Windows/Linux
  - Плохая совместимость VirtualBox с Apple Silicon

- **Фиксация версий**:

  ```markdown
  - Гипервизор: Parallels Desktop 19.3.0 (ARM-версия)
  - Хостовая машина:
    • macOS 15.4.1 (Sonoma)
    • Apple M2 Pro (12 ядер/19 ядер GPU)
    • 32GB Unified Memory
    • 1TB SSD (NVMe)
  ```

#### 2. Выбор СУБД
- **Используется PostgreSQL 16**:
  - **Преимущества**:
    1. Кросс-платформенная согласованность
    2. Расширенные инструменты диагностики производительности
    3. Нативная поддержка архитектуры ARM
  - **Контроль версий**:
    ```bash
    # Единая версия
    PostgreSQL 16.8 (ARM64)
    ```

#### 3. Выбор гостевых ОС
| Параметр                | Linux VM                   | Windows VM              |
| ----------------------- | -------------------------- | ----------------------- |
| **Версия ОС**           | Ubuntu 22.04.4 LTS (ARM64) | Windows 11 23H2 (ARM64) |
| **Разрядность**         | 64-bit                     | 64-bit                  |
| **Ключевые компоненты** | Минимальная установка      | Режим разработчика      |

#### 4. Конфигурация ВМ
- **Единые аппаратные параметры**:
  ```markdown
  - vCPU: 2 ядра
  - RAM: 4GB DDR5
  - Диск: 
    • Тип: динамический 
    • Размер: 64GB
  - Сеть: режим моста
  ```
- **Установка дополнений**:
  ```bash
  # Linux:
  sudo apt install parallels-tools
  
  # Windows:
  Автоматическая установка Parallels Tools
  ```

#### 5. Установка СУБД
- **Стандартный процесс**:
  ```bash
  # Для Ubuntu
  sudo apt install postgresql-16
  sudo systemctl enable postgresql
  
  # Для Windows
  Установка через Chocolatey: choco install postgresql16
  ```
- **Проверка**:
  ```sql
  SELECT version();  -- Должно возвращать: PostgreSQL 16.8 on arm64
  ```

#### 6. Настройка HammerDB
- **Контроль версий**:
  ```markdown
  - HammerDB v4.10 for macOS
  - Тестовый скрипт: TPROC-C (стандартный шаблон)
  ```
- **Ключевые настройки**:
  ```ini
  [Database]
  Connection Timeout=60000
  [Virtual Users]
  Count=8
  Rampup=120
  ```

#### 7. Фиксация конфигураций
- **Шаблон документации**:

  ```markdown
   Базовый конфигурационный снимок
  Дата: $(date)
  
  ### Аппаратные параметры
  | Компонент       | Хост       | Ubuntu VM | Windows VM |
  |----------------|------------|-----------|------------|
  | Архитектура    | ARM64      | ARM64     | ARM64      |
  
  ### Версии ПО
  - Parallels Desktop: 19.3.0-12345
  - PostgreSQL: 16.8
  - Ubuntu: 22.04.4
  - Windows: 11 23H2
  ```

### Особые замечания
1. **Специальные требования для Apple Silicon**:

   - Использовать только ARM-образы ОС
   - Отключить слой совместимости Rosetta

2. **Подготовка к тестированию**:

   ```bash
   # На обеих ВМ
   echo "vm.swappiness = 1" | sudo tee -a /etc/sysctl.conf  # Оптимизация для Linux
   powercfg -setactive 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c  # Режим высокой производительности Windows
   ```

Данная конфигурация специально оптимизирована для оборудования Apple Silicon, с жестким контролем версий и стандартизацией параметров для обеспечения сопоставимости результатов кросс-платформенного тестирования. Рекомендуется создавать снапшоты системы перед каждым тестом.